{% extends "Admin/admin_base.html.twig" %}

{% block title %}Gestion des catégories{% endblock %}


{% block body %}


    <div class="container bg-light pt-5">
	<div class="row mb-2">
		<div class="col">
			<div class="row g-0 border rounded overflow-hidden flex-md-row align-items-start mb-4 shadow-sm position-relative">
				<div class="col-8 p-4 d-flex flex-column position-static bg-light">
                    {% if app.request.attributes.get("_route") is same as "tcb_admin_category_add" %}
					    <h2>Ajouter une nouvelle catégorie</h2>
                    {% else %}
                        <h2>Modifier la catégorie</h2>
                    {% endif %}
					{{form_start(form, {attr: {novalidate: 'novalidate'}})}}
                    
						<div class="col-3 mb-3">
							{{form_label(form.title)}}
							{{form_widget(form.title)}}
							{{form_help(form.title)}}
							{{form_errors(form.title)}}
						</div>
						<div class="col-3 mb-3">
							{{form_label(form.picture)}}
							{{form_widget(form.picture)}}
							{{form_help(form.picture)}}
							{{form_errors(form.picture)}}
						</div>
							
						<button class="btn btn-primary" type="submit">Envoyer</button>
						
					{{form_end(form)}}
					<button 
						id="upload_widget" 
						class="cloudinary-button">
							Upload files
					</button>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}
{% block js %}
	<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  

	<script type="text/javascript">  
		var myWidget = cloudinary.createUploadWidget({
			cloudName: 'dxl8cac89', 
			uploadPreset: 'test_upload',
			folder: 'Images'}, (error, result) => { 
				if (!error && result && result.event === "success") { 
				console.log('Done! Here is the image info: ', result.info); 
				}
			}
		)

		document.getElementById("upload_widget").addEventListener("click", function(){
			myWidget.open();
		}, false);
	</script>

{% endblock %}